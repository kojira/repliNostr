<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Page Not Found</title>
    <script>
        // デバッグログ
        console.log('404 - Current URL:', window.location.href);
        console.log('404 - Origin:', window.location.origin);
        console.log('404 - Pathname:', window.location.pathname);
        
        // GitHub Pages環境のみで実行
        if (location.hostname.includes('github.io')) {
            console.log('404 - GitHub Pages environment detected');
            const url = window.location.href;
            const baseUrl = '/repliNostr/';

            // セッションストレージにリダイレクト情報を保存
            const pathname = window.location.pathname;
            const search = window.location.search;
            const hash = window.location.hash;
            const redirectPath = pathname.startsWith(baseUrl) 
                ? pathname 
                : baseUrl + pathname.replace(/^\//, '');

            const fullRedirectPath = window.location.origin + redirectPath + search + hash;
            console.log('404 - Setting redirect path:', fullRedirectPath);
            sessionStorage.redirect = fullRedirectPath;

            // SPAのルートにリダイレクト
            window.location.replace(window.location.origin + baseUrl);
        } else {
            console.log('404 - Development environment detected');
            window.location.replace('/');
        }
    </script>
</head>
<body>
    <h1>Page Not Found</h1>
    <p>Redirecting...</p>
</body>
</html>